<!DOCTYPE html>
<html lang="en"
>
<head>
    <title>Salto-Annotation - Josef Ruppenhofer</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="http://ruppenhofer.de/pages/salto-vorverarbeitung.html">

        <meta name="author" content="Josef Ruppenhofer" />
        <meta name="description" content="Preparing data for annotation in Salto (Local Hildesheim Info)" />

    <meta property="og:site_name" content="Josef Ruppenhofer" />
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Salto-Annotation"/>
    <meta property="og:url" content="http://ruppenhofer.de/pages/salto-vorverarbeitung.html"/>
    <meta property="og:description" content="Preparing data for annotation in Salto (Local Hildesheim Info)" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://ruppenhofer.de/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="http://ruppenhofer.de/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://ruppenhofer.de/theme/css/pygments/native.css" rel="stylesheet">
        <link href="http://ruppenhofer.de/theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="http://ruppenhofer.de/theme/css/style.css" type="text/css"/>


</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://ruppenhofer.de/" class="navbar-brand">
Josef Ruppenhofer            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="http://ruppenhofer.de/pages/Affiliations.html">Affiliations</a></li>
                    <li><a href="http://ruppenhofer.de/pages/contact.html">Contact</a></li>
                    <li><a href="http://ruppenhofer.de/pages/data sets.html">Datasets</a></li>
                    <li><a href="http://ruppenhofer.de/pages/research interests.html">Research</a></li>
                    <li><a href="http://ruppenhofer.de/pages/publications.html">Publications</a></li>
                    <li><a href="http://ruppenhofer.de/pages/teaching.html">Teaching</a></li>
                        <li >
                            <a href="http://ruppenhofer.de/category/blog.html">Blog</a>
                        </li>
                        <li >
                            <a href="http://ruppenhofer.de/category/general.html">General</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="http://ruppenhofer.de/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content" class="body">
        <h1 class="entry-title">Salto-Annotation</h1>
        
        <div class="entry-content">
            <p>Scenario: you want to do some kind of linguistic annotation that can be cast as an annotation problem to be done on top of a parse tree within Salto. Typical candidates: frame semantic annotation; co-reference; sentiment analysis; etc. Normally, people annotate on top of constituency syntax within&nbsp;Salto.</p>
<p>-1) What you&nbsp;need:</p>
<ul>
<li>OpenNLP installed (also get some  models)   - BerkeleyParser installed   - TigerRegistry/TigerSearch installed - Salto - Plain text data (and this means something in a file ending in .txt or some such; no .rtf, .doc, or .docx&nbsp;allowed!)</li>
<li>auf storage1 / vm-one unter&nbsp;/resources/tools/apache-opennlp-1.5.2-incubating</li>
<li>Unterverzeichnis Modelle /&nbsp;models</li>
<li>Doku:&nbsp;http://opennlp.apache.org/documentation/1.5.3/manual/opennlp.html</li>
</ul>
<p>0)  Character sets: check that you have a consistent character encoding and that that encoding works with all the tools you want to use. This is often more easily said than done but here’s that piece of advice anyway. If you need to convert, then iconv may be able to help you (at least on&nbsp;linux).</p>
<p>Byte order mark: if you get a file with a byte order mark, you can remove it like <a href="http://stackoverflow.com/questions/1068650/using-awk-to-remove-the-byte-order-mark"this</a>.</p>
<p>1) <SPAN STYLE="color: darkred">Sentence splitting and tokenization</SPAN></p>
<p>a) using the opennlp sentence&nbsp;detector</p>
<blockquote>
<p>An der Uni Hildesheim installiert unter&nbsp;/resources/tools/apache-opennlp-1.5.2-incubating</p>
</blockquote>
<p><code>
/your/path/to/apache-opennlp-1.5.2-incubating/bin$ ./opennlp SentenceDetector ../models/en-sent.bin &lt; ~/Desktop/tmp/input_file.txt &gt; ~/Desktop/tmp/input_file.snt
</code></p>
<p>The above assumes that the models for opennlp are in a sister directory to the bin&nbsp;directory.</p>
<p>b) opennlp also has  a penn treebank-style ”tokenizer”. You could also use&nbsp;nltk. </p>
<p><code>
 ./opennlp TokenizerME ../models/de-token.bin  &lt; /tmp/inputfile &gt; /tmp/outputfile
</code></p>
<p>In any event, if your data set is not extremely large and/or if it is kind of different from the newspaper language on which nlp tools are trained, it is recommended to hand check and fix the sentence splits and tokenization. It can save you a lot of unhappiness later&nbsp;on.</p>
<p>2) <SPAN STYLE="color: darkred">Parsing with the Berkeley&nbsp;Parser</span></p>
<blockquote>
<p>An der Uni Hildesheim installiert im Verzeichnis:&nbsp;/resources/tools/berkeleyParser</p>
</blockquote>
<p><code>
cat input | java -jar berkeleyParser.jar -gr ger_sm5.gr out.txt
</code></p>
<p><span class="caps">NB</span>: the parameter “-gr” specifies the grammar that is to be used. Depending on the parser version and/or the language you want to parse, you may need something other than what was used in the example&nbsp;above.</p>
<p>Your parses will likely not be 100% correct. You won’t be able to edit them in Salto. I won’t give a recommendation on how you might fix incorrect parses with&nbsp;ease.</p>
<p><b>Important</b>: check for empty parses before reading things into TigerRegistry and fix them before, or else you’ll have a&nbsp;problem.</p>
<p>3) <SPAN STYLE="color: darkred"><a href="http://www.ims.uni-stuttgart.de/forschung/ressourcen/werkzeuge/TIGERSearch/download/index.html">TigerRegistry</a></span>: we want to read the bracketed parser output into&nbsp;TigerRegistry.</p>
<blockquote>
<p><i>Derzeit eventuell nur auf windows möglich, da <span class="caps">GUI</span> nötig, was auf vm-one nicht zur Verfügung steht. (Stand:&nbsp;12.6.2013)</i></p>
</blockquote>
<p>4) <SPAN STYLE="color: darkred"><a href="http://www.ims.uni-stuttgart.de/forschung/ressourcen/werkzeuge/TIGERSearch/download/index.html">TigerSearch</a></span>: do  some query that will match every sentence. For instance, look for a token. Then export the results to&nbsp;xml.</p>
<blockquote>
<p>testen&nbsp;x-windows </p>
</blockquote>
<p>5) <SPAN STYLE="color: darkred">TreeTagger</span> if you want to use the Salsa <span class="caps">API</span>, you need to provide lemma information for the terminals in your tree.  You can get real lemma info from the treetagger or from someplace else. If you don’t have lemmas, the <span class="caps">API</span> really won’t want to play with your file. Btw: you can  just use perl or whatever to insert empty lemma=”” attributes—Salto doesn’t care whether you have useful values&nbsp;specified.</p>
<blockquote>
<p><i>An der Uni Hildesheim installiert unter:&nbsp;/usr/local/share/tree-tagger</i></p>
</blockquote>
<p><code>
cat input file | /usr/local/share/tree-tagger input-file &gt; outputfile
cat input file | /usr/local/share/tree-tagger-german-utf8 &gt; outputfile
</code></p>
<p>6) Voila, you’ve got an xml file that you can open in Salto. What is still up to you is to define the annotation&nbsp;frame(s).</p>
<p><i>Salto works on Windows and Linux. Pick your&nbsp;poison.</i></p>
<p>(If you want to get rid of the pink coloring of the terminals, open the xml-file in an appropriate editor [Notepad++, emacs, geany, or some such] and look for the <matches> elements: delete&nbsp;them.)</p>
<p>7) Extra credit: in order to be able to do annotation in Salto that crosses sentence boundaries, you need to take the directory for your newly created  corpus  that exists somewhere under the TigerRegistry directory and copy it into the corpora subdirectory under your Salto installation directory. When you open an xml file in Salto, you’ll be asked to pick out the corpus from which the xml file was drawn and then you can point to the relevant corpus, thereby enabling cross-sentence&nbsp;annotation.</p>
        </div>
    </section>
        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">



            <li class="list-group-item"><a href="http://ruppenhofer.de/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                <ul class="list-group " id="tags">
                </ul>
            </li>
    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://wisscamp.de/en/" target="_blank">
                LWC
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://getpelican.com/" target="_blank">
                Pelican
            </a>
        </li>
      </ul>
    </li>
    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2016 
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://ruppenhofer.de/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://ruppenhofer.de/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://ruppenhofer.de/theme/js/respond.min.js"></script>


</body>
</html>